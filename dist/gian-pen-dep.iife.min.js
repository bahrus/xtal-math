!function(){function define(t){let e=t.is;customElements.get(e)?console.warn("Already registered "+e):customElements.define(e,t)}const disabled="disabled";function XtallatX(t){return class extends t{constructor(){super(...arguments),this._evCount={}}static get observedAttributes(){return[disabled]}get disabled(){return this._disabled}set disabled(t){this.attr(disabled,t,"")}attr(t,e,s){this[(e?"set":"remove")+"Attribute"](t,s||e)}to$(t){const e=t%2;return(t-e)/2+"-"+e}incAttr(t){const e=this._evCount;t in e?e[t]++:e[t]=0,this.attr("data-"+t,this.to$(e[t]))}attributeChangedCallback(t,e,s){switch(t){case disabled:this._disabled=null!==s}}de(t,e,s){const i=t+(s?"":"-changed"),n=new CustomEvent(i,{detail:e,bubbles:!0,composed:!1});return this.dispatchEvent(n),this.incAttr(i),n}_upgradeProperties(t){t.forEach(t=>{if(this.hasOwnProperty(t)){let e=this[t];delete this[t],this[t]=e}})}}}const spKey="__xtal_deco_onPropsChange";class XtalDeco extends HTMLElement{static get is(){return"xtal-deco"}connectedCallback(){this.style.display="none",this.getElement("_nextSibling",t=>t.nextElementSibling),this.getElement("_script",t=>t.querySelector("script"))}static attachBehavior(t,e){for(const s in e){const i=e[s];switch(s){case"on":for(const e in i){const s=e+"_decoHandler";Object.defineProperty(t,s,{enumerable:!1,configurable:!0,writable:!0,value:i[e]});t.addEventListener(e,t[s])}break;case"props":for(const e in i){const s=i[e];Object.defineProperty(t,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]=t;const s=new CustomEvent(e+"-changed",{detail:{value:t},bubbles:!0,composed:!1});this.dispatchEvent(s),this[spKey]&&this[spKey](e,t)},enumerable:!0,configurable:!0}),t[e]=s}break;case"setters":for(const e in i){const s=i[e];t[e]=s}break;default:switch(typeof i){case"function":const e="onPropsChange"===s?spKey:s;Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:i});break;case"object":t[s]=i}}}}getElement(t,e){this[t]=e(this),this[t]?this.onDecoPropsChange():setTimeout(()=>{this.getElement(t,e)})}evaluateCode(scriptElement,target){const evalObj=eval(scriptElement.innerHTML);XtalDeco.attachBehavior(target,evalObj),this._nextSibling.removeAttribute("disabled")}onDecoPropsChange(){this._nextSibling&&this._script&&this.evaluateCode(this._script,this._nextSibling)}}define(XtalDeco);const on="on",noblock="noblock",iff="if",to="to",prop="prop",val="val";class P extends(XtallatX(HTMLElement)){constructor(){super(),this._lastEvent=null}get on(){return this._on}set on(t){this.attr(on,t)}get to(){return this._to}set to(t){this.attr(to,t)}get noblock(){return this._noblock}set noblock(t){this.attr(noblock,t,"")}get if(){return this._if}set if(t){this.attr(iff,t)}get prop(){return this._prop}set prop(t){this.attr(prop,t)}get val(){return this._val}set val(t){this.attr(prop,t)}static get observedAttributes(){return super.observedAttributes.concat([on,to,noblock,iff,prop,val])}attributeChangedCallback(t,e,s){const i="_"+t;switch(t){case iff:case on:case prop:case val:case to:this[i]=s;break;case noblock:this[i]=null!==s}super.attributeChangedCallback(t,e,s)}getPreviousSib(){let t=this;for(;t&&t.tagName.startsWith("P-");)t=t.previousElementSibling;return null===t&&(t=this.parentElement),t}connectedCallback(){this.style.display="none",this._upgradeProperties([on,to,noblock,iff,prop,val]),this.init()}init(){this.attchEvListnrs(),this.doFake()}attchEvListnrs(){if(this._bndHndlEv)return;this._bndHndlEv=this._hndEv.bind(this);const t=this.getPreviousSib();if(!t)return;t.addEventListener(this._on,this._bndHndlEv);const e=t.getAttribute("disabled");null!==e&&(0===e.length||"1"===e?t.removeAttribute("disabled"):t.setAttribute("disabled",(parseInt(e)-1).toString()))}skI(){return this.hasAttribute("skip-init")}doFake(){if(!this._if&&!this.skI()){let t=this._lastEvent;t||(t={target:this.getPreviousSib(),isFake:!0}),this._hndEv&&this._hndEv(t)}}_hndEv(t){this.hasAttribute("debug"),t&&(t.stopPropagation&&!this._noblock&&t.stopPropagation(),this._if&&!t.target.matches(this._if)||(this._lastEvent=t,this.pass(t)))}$N(t,e){return null==t?e:t}setVal(t,e){const s=this.getPropFromPath.bind(this),i=this.val?s(t,this.val):this.$N(s(t,"detail.value"),s(t,"target.value"));this.commit(e,i)}commit(t,e){void 0!==e&&(t[this.prop]=e)}getPropFromPath(t,e){return e&&"."!==e?this.getProp(t,e.split(".")):t}getProp(t,e){let s=t,i=!0;const n="composedPath";return e.forEach(t=>{if(s)if(i&&s[n]){i=!1;const e=t.split("composedPath_");s=1===e.length?s[e[0]]:s[n]()[parseInt(e[1])]}else s=s[t]}),s}detach(t){t.removeEventListener(this._on,this._bndHndlEv)}disconnectedCallback(){const t=this.getPreviousSib();t&&this._bndHndlEv&&this.detach(t)}}class PU extends P{static get is(){return"p-u"}pass(t){const e=this.to,s=e.split("/"),i=s[s.length-1];let n;if(e.startsWith("/"))n=self[e];else{e.startsWith("./")||s.length;const t=this.getHost(this,0,s.length);if(!t)throw"Target Element Not found";t.shadowRoot&&(n=t.shadowRoot.getElementById(i))||(n=t.querySelector("#"+i))}this.setVal(t,n)}getHost(t,e,s){let i=t;for(;i=i.parentElement;){if(11===i.nodeType){const t=e+1;return t>=s?i.host:this.getHost(i.host,t,s)}if("HTML"===i.tagName)return i}}connectedCallback(){super.connectedCallback()}}define(PU)}();